---
import type { Segment } from '../models/interfaces/html';
import TableOfContents from './TableOfContents.astro';

interface Props {
  segments: Segment[];
}

const { segments } = Astro.props;
---

<article class="post-content">
  {
    segments.map((segment) => {
      if (segment.type === 'html') {
        return <Fragment set:html={segment.content} />;
      } else if (segment.type === 'component') {
        if (segment.component === 'TableOfContents') {
          return (
            <TableOfContents
              title={segment.props?.title || null}
              headings={segment.props?.headings || null}
            />
          );
        } else {
          return <Fragment />;
        }
      }
    })
  }
</article>

<style is:global>
  .post-content {
    max-width: 700px;
    width: 100%;
    margin: 0 auto;
  }

  .post-content header,
  .post-content section {
    margin: 0 1rem;
  }

  .post-content p {
    margin: 0.75rem 0;

    font-size: 1.15rem;
    text-align: left;
    text-wrap: pretty;
  }

  .post-content h1 {
    margin: 0.5rem 0;
    margin-top: 3rem;

    font-size: 2.5rem;
    line-height: 3rem;
  }

  .post-content h2 {
    margin-bottom: 1.25rem;
    padding-top: 5rem;

    font-size: 1.75rem;
    line-height: 2.25rem;
  }

  .post-content h3 {
    margin-bottom: 1rem;
    padding-top: 3rem;

    font-size: 1.35rem;
    line-height: 1.85rem;
  }

  .post-content .table-of-contents {
    margin-top: 3rem;
    margin-bottom: 0.5rem;
  }
</style>
